<!DOCTYPE html> <html lang="th"> <head> <meta charset="UTF-8"> <title>QR Check-in</title> <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script> <style> body { font-family: Arial, sans-serif; margin: 0; height: 100vh; display: flex; flex-direction: column; } /* ส่วนบน */ .header { text-align: center; padding: 10px; } /* กลางจอสำหรับ QR */ .qr-container { flex: 1; display: flex; justify-content: center; align-items: center; } /* กล่อง QR */ #qrcode { padding: 15px; border: 3px solid #2196f3; border-radius: 10px; background: #fff; } /* ส่วนล่าง */ .footer { text-align: center; padding-bottom: 15px; } .status-normal { color: green; } .status-late { color: orange; } .status-closed { color: red; } table { margin: auto; border-collapse: collapse; } td, th { border: 1px solid #ccc; padding: 5px 10px; } </style> </head> <body> <div class="header"> <h2>ระบบเช็กชื่อด้วย QR Code</h2> <button onclick="startClass()">เริ่มคาบเรียน</button> <div id="status"></div> </div> <div class="qr-container"> <div id="qrcode"></div> </div> <div class="footer"> <h3>นักเรียนเช็กชื่อ</h3> <input type="text" id="studentName" placeholder="ชื่อนักเรียน"> <button onclick="checkIn()">เช็กชื่อ</button> <hr> <h3>รายชื่อผู้เข้าเรียน</h3> <table> <thead> <tr> <th>ชื่อ</th> <th>สถานะ</th> <th>เวลา</th> </tr> </thead> <tbody id="log"></tbody> </table> </div> <script> let startTime = null; function startClass() { startTime = new Date(); document.getElementById("status").innerHTML = "<b class='status-normal'>เริ่มเช็กชื่อแล้ว (5 นาทีแรก = ปกติ)</b>"; updateQR(); } function getStatus() { if (!startTime) return "ยังไม่เริ่ม"; const diff = (new Date() - startTime) / 60000; if (diff <= 5) return "ปกติ"; if (diff <= 10) return "มาสาย"; return "ปิด"; } function updateQR() { const status = getStatus(); document.getElementById("qrcode").innerHTML = ""; if (status === "ปิด") { document.getElementById("status").innerHTML = "<b class='status-closed'>ปิดเช็กชื่อแล้ว</b>"; return; } new QRCode(document.getElementById("qrcode"), { text: location.href, width: 220, height: 220 }); setTimeout(updateQR, 1000); } function checkIn() { const name = document.getElementById("studentName").value.trim(); if (!name) { alert("กรุณาใส่ชื่อ"); return; } const status = getStatus(); if (status === "ปิด") { alert("หมดเวลาเช็กชื่อ"); return; } const time = new Date().toLocaleTimeString(); const data = JSON.parse(localStorage.getItem("checkin") || "[]"); if (data.find(d => d.name === name)) { alert("เช็กชื่อแล้ว"); return; } data.push({ name, status, time }); localStorage.setItem("checkin", JSON.stringify(data)); render(); } function render() { const data = JSON.parse(localStorage.getItem("checkin") || "[]"); const tbody = document.getElementById("log"); tbody.innerHTML = ""; data.forEach(d => { tbody.innerHTML += <tr> <td>${d.name}</td> <td>${d.status}</td> <td>${d.time}</td> </tr> ; }); } render(); </script> </body> </html>